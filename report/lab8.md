# Lab 8

考虑到测试场景中只有一个读者和一个写者，这里的实现参考了 ``std::sync::mpsc`` 的行为。

让每个由 ``sys_pipe()`` 产生的 ``File`` 都保管一个 ``Arc<Mutex<VecDeque<u8>>>``，其中 ``VecDeque<u8>`` 是管道主体。``sys_read()`` 时进行循环，每个循环中都尝试取出管道尾部的一个字符，若成功则结束；``sys_write()`` 时则把一个字符放入管道头部。

## 思考题

1. 会阻塞，直到父进程写数据。

2. 借助 ``Arc`` 和 ``Mutex`` 实现管道的安全共享。

3. 若子进程没有读到数据，则应先放弃锁，然后再重新尝试获取，让父进程有获得锁然后写数据的机会。

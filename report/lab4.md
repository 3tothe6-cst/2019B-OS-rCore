# Lab 4

# 回答一

首先，获得当前线程的结构体表示，然后创建一个新线程，其入口点为 ``temp_thread``，并传入两个参数，分别为当前线程结构体的地址和新线程结构体的地址。创建新线程的过程中，为新线程分配了一片内存空间作为新线程的栈，还为新线程创建了一个上下文，其中的栈顶地址为上述栈的栈顶地址。创建新进程后，由主进程切换到新进程，新进程输出第一条问候消息后再主动切换回主进程，最后再输出第二条问候消息，并进入死循环。

# 回答二

线程状态保存完毕时的栈状态：

```
| ra | satp | s0 | s1 | ... | s11 |
^
栈顶
```
